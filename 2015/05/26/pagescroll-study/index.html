<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="前端插件,单页全屏,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="引言使用了jQuery插件 jquery.onepage-scroll.js 1.2.1 （下文用onepage-scroll）插件进行修改。具体文章详见 How I Built The One Page Scroll Plugin。onepage-scroll新版本为 1.3.1 本插件的名字为 jquery.pagescroll.js（下文用 pagescroll） ，以向 onepage-s">
<meta name="keywords" content="前端插件,单页全屏">
<meta property="og:type" content="article">
<meta property="og:title" content="PageScroll 研究">
<meta property="og:url" content="http://www.xiaoxili.com/2015/05/26/pagescroll-study/index.html">
<meta property="og:site_name" content="小溪里 - XiaoXili.com">
<meta property="og:description" content="引言使用了jQuery插件 jquery.onepage-scroll.js 1.2.1 （下文用onepage-scroll）插件进行修改。具体文章详见 How I Built The One Page Scroll Plugin。onepage-scroll新版本为 1.3.1 本插件的名字为 jquery.pagescroll.js（下文用 pagescroll） ，以向 onepage-s">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-04-30T07:28:08.631Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PageScroll 研究">
<meta name="twitter:description" content="引言使用了jQuery插件 jquery.onepage-scroll.js 1.2.1 （下文用onepage-scroll）插件进行修改。具体文章详见 How I Built The One Page Scroll Plugin。onepage-scroll新版本为 1.3.1 本插件的名字为 jquery.pagescroll.js（下文用 pagescroll） ，以向 onepage-s">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.xiaoxili.com/2015/05/26/pagescroll-study/">





  <title> PageScroll 研究 | 小溪里 - XiaoXili.com </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">小溪里 - XiaoXili.com</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">前端闲扯</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://www.xiaoxili.com/2015/05/26/pagescroll-study/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Chilligo Sheng">
    <meta itemprop="description" content>
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="小溪里 - XiaoXili.com">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="小溪里 - XiaoXili.com" src>
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                PageScroll 研究
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-05-26T15:01:07+08:00">
                2015-05-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端/" itemprop="url" rel="index">
                    <span itemprop="name">前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>使用了jQuery插件 <a href="https://github.com/peachananr/onepage-scroll" target="_blank" rel="noopener">jquery.onepage-scroll.js 1.2.1</a> （下文用onepage-scroll）插件进行修改。具体文章详见 <a href="http://www.smashingmagazine.com/2014/08/25/how-i-built-the-one-page-scroll-plugin/" target="_blank" rel="noopener">How I Built The One Page Scroll Plugin</a>。onepage-scroll新版本为 1.3.1</p>
<p>本插件的名字为 jquery.pagescroll.js（下文用 pagescroll） ，以向 onepage-scroll 致敬，同时为了有点区别。</p>
<h3 id="功能列表"><a href="#功能列表" class="headerlink" title="功能列表"></a>功能列表</h3><ul>
<li>单页/全屏滚动（借鉴）<ul>
<li>支持鼠标滚轮、空格键、上下方向键、上下翻页键、上下滑动</li>
<li>在PC和ipad上支持 <strong>响应式</strong> 操作</li>
<li>在Mobile上支持竖屏滚动，横屏正常拖动</li>
</ul>
</li>
<li>支持 header、footer、topSlideNav、pagination</li>
<li>手指跟随(未加入阻尼)</li>
<li>页面回弹(有阻尼)</li>
<li>支持 CSS3 easing cubic-bezier()</li>
</ul>
<a id="more"></a>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p>在 onepage-scroll 中用 <code>translate3d 100%</code>进行了一屏滑动，同时在ie8上使用了绝对定位进行滚屏操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform: translate3d(0, 100%, 0)</span><br></pre></td></tr></table></figure>
<h3 id="单位，是使用-还是-px-像素"><a href="#单位，是使用-还是-px-像素" class="headerlink" title="单位，是使用 % 还是 px (像素)"></a>单位，是使用 % 还是 px (像素)</h3><p>在百度V5.7和搜狗3.7.4 对transform: translate3d(0, ?%, 0)中百分比不支持，所以改用px</p>
<p>具体表现：滚屏会白屏或计算不准确。<a href="http://www.thepetedesign.com/demos/onepage_scroll_demo.html" target="_blank" rel="noopener">View Demo</a></p>
<p>另外，本插件支持 <code>手指跟随</code> 和 <code>页面回弹</code>，那么用px进行计算会更加方便一些。</p>
<h3 id="是否兼容IE9"><a href="#是否兼容IE9" class="headerlink" title="是否兼容IE9-"></a>是否兼容IE9-</h3><blockquote>
<p>IE9-指的是不支持translate3d的Internet Explorer，包含ie6、ie7、ie8、ie9.</p>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//onepage-scroll 1.3.1</span><br><span class="line">if($(&apos;html&apos;).hasClass(&apos;ie8&apos;)) &#123; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>在 <code>onepage-scroll 1.3.1</code> 中有对 IE9- 的支持，但考虑到pagescroll使用了 <code>translate3d</code> 这么高大上的方式，并且在 IE9- 上表现效果也不好，在经过反复考虑后决定先不支持 IE9-。在IE8、IE9 上再做单独处理吧。</p>
<blockquote>
<p>modernizr.transforms3d.js<br>判断浏览器所能支持的特性，本插件所使用的modernizr 2.8.3使用定制版本<br>网址：<a href="http://modernizr.com/download/#-csstransforms3d-shiv-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes-load" target="_blank" rel="noopener">http://modernizr.com/download/#-csstransforms3d-shiv-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes-load</a><br>在 IE10+ 、Chrome 、Safari 、Firefox 等浏览器上支持 csstransforms3d，才可以使用pagescroll<br>在 IE9- 等浏览器上不支持csstransforms3d，所以就不启动page scroll</p>
</blockquote>
<h3 id="各大浏览器的具体表现如何？"><a href="#各大浏览器的具体表现如何？" class="headerlink" title="各大浏览器的具体表现如何？"></a>各大浏览器的具体表现如何？</h3><p>在 Safari 浏览器和 Smartisan T1 自带浏览器上，如果页面高度超过了浏览器内容高度的话，在上下滑动时，浏览器的标题栏、工具栏都可能会消失，那这时候会影响到页面滚屏的效果。但在 pagescroll 不会出现这个问题。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">html.onepage-wrapper, html.onepage-wrapper body &#123;</span><br><span class="line">  margin: 0;</span><br><span class="line">  height: 100%;</span><br><span class="line">  -webkit-tap-highlight-color: rgba(0,0,0,0);</span><br><span class="line">  -webkit-tap-highlight-color: transparent; /* For some Androids */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hidden &#123;</span><br><span class="line">  overflow-y: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mac-hidden &#123;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="手势操作"><a href="#手势操作" class="headerlink" title="手势操作"></a>手势操作</h2><p>在 onepage-scroll 只提供了上下左右滑动的单页/全屏滚动。但在智能手机或平板上除了整屏滑动之外，还拥有手指跟苏和页面回弹等特性。</p>
<p>pagescroll 主要是针对 <code>swipeEvents</code> 进行了扩展。在 onepage-scroll 中使用 <code>touchMove</code> 来 <code>trigger</code> 了 <code>swipe</code> 事件(包含up、down、left、right)。在 pagescroll 中，因为需要加上手指跟随和页面回弹这两个特性，将触发swipe动作主要放在了 <code>touchEnd</code> 事件上。</p>
<h3 id="慢速滑动和快速滑动"><a href="#慢速滑动和快速滑动" class="headerlink" title="慢速滑动和快速滑动"></a>慢速滑动和快速滑动</h3><p><strong>慢速滑动</strong></p>
<ol>
<li>touchStart 中记录 <code>startY</code></li>
<li>touchMove 中算出 <code>endY(startY - touches[0].pageY)</code></li>
<li>在 touchEnd 中判断 <code>endY</code> 是否超过 50。若超过50，将 <code>trigger</code> 了 <code>swipe</code> 事件(包含up、down、left、right)。</li>
</ol>
<p><strong>快速滑动</strong></p>
<ol>
<li>touchStart 中记录 <code>startTime</code></li>
<li>touchEnd 中记录 <code>endTime</code>， 并判断时间间隔 <code>quickSwipeTime = (endTime - startTime) &lt; 300;</code></li>
<li>在 touchEnd 中判断时间间隔是否小于 300ms。若小于300ms，将 <code>trigger</code> 了 <code>swipe</code> 事件(包含up、down、left、right)。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var endTime = new Date().getTime();</span><br><span class="line">var quickSwipeTime = (endTime - startTime) &lt; 300;</span><br><span class="line">if (endX &gt;= 50 || (endX &gt; 14 quickSwipeTime&amp;&amp; )) &#123;</span><br><span class="line">    $this.trigger(&apos;swipeLeft&apos;);</span><br><span class="line">&#125; else if (endX &lt;= -50 || (endX &lt; -14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">    $this.trigger(&apos;swipeRight&apos;);</span><br><span class="line">&#125;</span><br><span class="line">if (endY &gt;= 50 || (endY &gt; 14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">    $this.trigger(&apos;swipeUp&apos;);</span><br><span class="line">&#125; else if (endY &lt;= -50 || (endY &lt; -14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">    $this.trigger(&apos;swipeDown&apos;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="bug处理——卡在标题栏"><a href="#bug处理——卡在标题栏" class="headerlink" title="bug处理——卡在标题栏"></a>bug处理——卡在标题栏</h4><p>在ipad和iPhone上滑到微信标题栏时，此时并不会 <code>touchEnd</code>，此时页面会卡在页面上。pagescroll 会 <code>touches[0].pageY</code> 是否小于 0，然后让其触发 <code>doSwipe()</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (touches[0].pageY &lt; 0 || startY &gt;= windowHeight - 10 ) &#123;</span><br><span class="line">// 触发滑动或页面回弹</span><br><span class="line">doSwipe();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="手指跟随"><a href="#手指跟随" class="headerlink" title="手指跟随"></a>手指跟随</h3><p>手指跟随的逻辑其实挺简单的。</p>
<ol>
<li>touchStart 中记录 <code>startY</code></li>
<li>touchMove 中算出 <code>endY(startY - touches[0].pageY)</code></li>
<li>在 touchMove 中即时改变 页面容器的 <code>translate3d</code></li>
</ol>
<h3 id="页面回弹"><a href="#页面回弹" class="headerlink" title="页面回弹"></a>页面回弹</h3><p>页面回弹的逻辑其实挺简单的。</p>
<ol>
<li>touchStart 中记录 <code>startY</code></li>
<li>touchMove 中算出 <code>endY(startY - touches[0].pageY)</code></li>
<li>在 touchEnd </li>
</ol>
<h4 id="bug处理——开在调出控制中心后"><a href="#bug处理——开在调出控制中心后" class="headerlink" title="bug处理——开在调出控制中心后"></a>bug处理——开在调出控制中心后</h4><p>在ipad和iPhone上有屏幕底部滑出“控制中心”时，也不会触发<code>touchEnd</code>，此时页面也会卡住。pagescroll 使用了 <code>touchCancel</code> 来让页面回弹。</p>
<h3 id="附上-swipeEvents-代码"><a href="#附上-swipeEvents-代码" class="headerlink" title="附上 swipeEvents 代码"></a>附上 swipeEvents 代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line">$.fn.swipeEvents = function() &#123;</span><br><span class="line">    return this.each(function () &#123;</span><br><span class="line"></span><br><span class="line">        // 横向起始位置</span><br><span class="line">        var startX;</span><br><span class="line">        // 纵向起始位置</span><br><span class="line">        var startY;</span><br><span class="line">        // 横向截止位置</span><br><span class="line">        var endX;</span><br><span class="line">        // 纵向截止位置</span><br><span class="line">        var endY;</span><br><span class="line">        // 页面高度</span><br><span class="line">        var windowHeight = element._window.height();</span><br><span class="line">        // 页面回弹的触发高度</span><br><span class="line">        var positionXY = windowHeight * 0.25;</span><br><span class="line"></span><br><span class="line">        // 快速滑动</span><br><span class="line">        var startTime;</span><br><span class="line"></span><br><span class="line">        // 赋值$(this)的指向</span><br><span class="line">        var $this = $(this);</span><br><span class="line"></span><br><span class="line">        // 元素绑定touchstart和touchend事件</span><br><span class="line">        $this.on(&apos;touchstart&apos;, touchstart);</span><br><span class="line">        $this.on(&apos;touchend&apos;, touchend);</span><br><span class="line">        $this.on(&apos;touchcancel&apos;, touchcancel);</span><br><span class="line"></span><br><span class="line">        function touchstart(event) &#123;</span><br><span class="line"></span><br><span class="line">            var touches = event.originalEvent.touches;</span><br><span class="line">            if (touches &amp;&amp; touches.length) &#123;</span><br><span class="line"></span><br><span class="line">                // 触摸的起始坐标</span><br><span class="line">                startX = touches[0].pageX;</span><br><span class="line">                startY = touches[0].pageY;</span><br><span class="line">                startTime = new Date().getTime();</span><br><span class="line"></span><br><span class="line">                // touchstart上绑定touchmove，持续运行</span><br><span class="line">                $this.on(&apos;touchmove&apos;, touchmove);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function touchmove(event) &#123;</span><br><span class="line"></span><br><span class="line">            var touches = event.originalEvent.touches;</span><br><span class="line">            if (touches &amp;&amp; touches.length) &#123;</span><br><span class="line"></span><br><span class="line">                // 加上preventDefault在T1、QQ浏览器上才能触发touchend事件</span><br><span class="line">                event.preventDefault();</span><br><span class="line"></span><br><span class="line">                // 滑动的位移/偏移</span><br><span class="line">                endX = startX - touches[0].pageX;</span><br><span class="line">                endY = startY - touches[0].pageY;</span><br><span class="line"></span><br><span class="line">                // 显示页码</span><br><span class="line">                if (isMobile) &#123;</span><br><span class="line">                    pagination.show(10);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 在首页和末页，只能跟随手指50px</span><br><span class="line">                if (headerFooterNeed) &#123;</span><br><span class="line">                    if (endIndex == 0) &#123;</span><br><span class="line">                        endY = ( 1 - 0.82 * Math.abs(endY) / windowHeight) * endY;</span><br><span class="line">                        endY = endY &lt;= -positionXY ? -(positionXY - 0.000001) : endY;</span><br><span class="line">                    &#125; else if (endIndex == element.section.length + 1)&#123;</span><br><span class="line">                        endY = ( 1 - 0.82 * Math.abs(endY) / windowHeight) * endY;</span><br><span class="line">                        endY = endY &gt;= positionXY ? (positionXY - 0.000001) : endY;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line"></span><br><span class="line">                    if (endIndex == 1 &amp;&amp; endY &lt; 0) &#123;</span><br><span class="line">                        endY = ( 1 - 0.82 * Math.abs(endY) / windowHeight) * endY;</span><br><span class="line">                        endY = endY &lt;= -positionXY ? -(positionXY - 0.000001) : endY;</span><br><span class="line">                        </span><br><span class="line">                    &#125; else if (endIndex == element.section.length &amp;&amp; endY &gt; 0)&#123;</span><br><span class="line">                        endY = ( 1 - 0.82 * Math.abs(endY) / windowHeight) * endY;</span><br><span class="line">                        endY = endY &gt;= positionXY ? (positionXY - 0.000001) : endY;</span><br><span class="line">                    </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 计算整屏需要的位移/偏移量</span><br><span class="line">                // 手指移动100%，屏幕移动50%</span><br><span class="line">                var pos = -endY / 2 + endTop;</span><br><span class="line"></span><br><span class="line">                // 如果touchend触发的动画不在进行中</span><br><span class="line">                if (!isRunning) &#123;</span><br><span class="line">                    // 页面跟随手指移动</span><br><span class="line">                    changeSectionPosition(pos, 0, settings.easing);</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (touches[0].pageY &lt; 0 || startY &gt;= windowHeight - 10 ) &#123;</span><br><span class="line">                    // $(&apos;a.back&apos;).html($(&apos;a.back&apos;).html() +&apos;&lt;br /&gt; touchmove doSwipe&apos;);</span><br><span class="line">                    doSwipe();</span><br><span class="line">                    //$this.off(&apos;touchend&apos;, touchend);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        function touchend(event) &#123;</span><br><span class="line">            var touches = event.originalEvent.changedTouches;</span><br><span class="line">            if (touches &amp;&amp; touches.length) &#123;</span><br><span class="line">                doSwipe();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; // toudend end</span><br><span class="line"></span><br><span class="line">        function touchcancel(event) &#123;</span><br><span class="line">            // 位移过小，则页面回弹</span><br><span class="line">                if (Math.abs(endY) &lt; positionXY) &#123;</span><br><span class="line">                    var animationTime = settings.animationTime / 2;</span><br><span class="line">                    changeSectionPosition(endTop, animationTime, &apos;cubic-bezier(.4,.01,.165,.99)&apos;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 隐藏页码</span><br><span class="line">                if (isMobile) &#123;</span><br><span class="line">                    pagination.hide(1600);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 关闭touchmove</span><br><span class="line">                $this.off(&apos;touchmove&apos;, touchmove);</span><br><span class="line">        &#125; // toudend end</span><br><span class="line"></span><br><span class="line">        function doSwipe () &#123;</span><br><span class="line">                // 将swipeEvent与滑动方向绑定在一起</span><br><span class="line">                var endTime = new Date().getTime();</span><br><span class="line">                var quickSwipeTime = endTime - startTime &lt; 300;</span><br><span class="line">                if (endX &gt;= 50 || (endX &gt; 14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">                    $this.trigger(&apos;swipeLeft&apos;);</span><br><span class="line">                &#125; else if (endX &lt;= -50 || (endX &lt; -14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">                    $this.trigger(&apos;swipeRight&apos;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (endY &gt;= 50 || (endY &gt; 14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">                    $this.trigger(&apos;swipeUp&apos;);</span><br><span class="line">                &#125; else if (endY &lt;= -50 || (endY &lt; -14 &amp;&amp; quickSwipeTime)) &#123;</span><br><span class="line">                    $this.trigger(&apos;swipeDown&apos;);</span><br><span class="line">                &#125;;</span><br><span class="line"></span><br><span class="line">                // 位移过小，则页面回弹</span><br><span class="line">                if (Math.abs(endY) &lt; positionXY) &#123;</span><br><span class="line">                    var animationTime = settings.animationTime / 2;</span><br><span class="line">                    changeSectionPosition(endTop, animationTime, &apos;cubic-bezier(.4,.01,.165,.99)&apos;);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 隐藏页码</span><br><span class="line">                if (isMobile) &#123;</span><br><span class="line">                    pagination.hide(1600);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 关闭touchmove</span><br><span class="line">                $this.off(&apos;touchmove&apos;, touchmove);</span><br><span class="line">                endX = 0;</span><br><span class="line">                endY = 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var touchHandler = &#123;</span><br><span class="line">    isTablet : navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|Windows Phone|Tizen|Bada)/),</span><br><span class="line">    addTouchHandler: function()&#123;</span><br><span class="line">        el.swipeEvents().bind(&quot;swipeDown&quot;,  function(event)&#123; </span><br><span class="line">            mouseWheelHandle(event, 1);</span><br><span class="line">        &#125;).bind(&quot;swipeUp&quot;, function(event)&#123; </span><br><span class="line">            mouseWheelHandle(event, -1);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    removeTouchHandler: function()&#123;</span><br><span class="line">        el.swipeEvents().unbind(&quot;swipeDown swipeUp&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="核心函数"><a href="#核心函数" class="headerlink" title="核心函数"></a>核心函数</h2><h3 id="doScroll"><a href="#doScroll" class="headerlink" title="doScroll()"></a>doScroll()</h3><p><code>doScroll()</code> 完成了滚动屏幕的核心功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var isRunning = false;</span><br><span class="line"></span><br><span class="line">function doScroll(delta) &#123;</span><br><span class="line">    // 检测动画是否在运行</span><br><span class="line">    if (isRunning) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    isRunning = true;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        isRunning = false;</span><br><span class="line">    &#125;, settings.animationTime + 300);</span><br><span class="line">    // 更新 endIndex</span><br><span class="line">    updateIndex(delta);</span><br><span class="line">    // 更新 endTop</span><br><span class="line">    updateTop();</span><br><span class="line"></span><br><span class="line">    // 执行页面切换动画</span><br><span class="line">    el.transformPage(settings, endTop, endIndex, delta);</span><br><span class="line"></span><br><span class="line">    //if (headerFooterNeed) &#123;</span><br><span class="line">        subNav.toggle();</span><br><span class="line">    //&#125;</span><br><span class="line"></span><br><span class="line">    // pagination 切换 active 状态</span><br><span class="line">    pagination.toggle();</span><br><span class="line">    screenSwitch.toggle();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>isRunning</strong><br>在 onepage-scroll 的实际操作中，如果快速滑动页面，可能前一屏页面动画还没执行完就立马执行下一屏了，导致用户体验变差。在 pagescroll中引入了 <code>isRunning</code>  来阻断页面动画还没有执行完的页面连续上下切换。</p>
<h3 id="transformPage"><a href="#transformPage" class="headerlink" title="transformPage()"></a>transformPage()</h3><p><code>transformPage</code> 完成了页面切换的功能，其中提供了 <code>beforeMove</code> 和 <code>afterMove</code> 功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 切换页面</span><br><span class="line">$.fn.transformPage = function(settings, pos, index, delta) &#123;</span><br><span class="line"></span><br><span class="line">    if (typeof settings.beforeMove == &apos;function&apos;) &#123;</span><br><span class="line">        settings.beforeMove(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    changeSectionPosition(pos, settings.animationTime, settings.easing);</span><br><span class="line"></span><br><span class="line">    $(this).one(&apos;webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend&apos;, function(e) &#123;</span><br><span class="line">        if (typeof settings.afterMove == &apos;function&apos;)&#123;</span><br><span class="line">            settings.afterMove(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    // 页面切换时执行</span><br><span class="line">    page.transition(index, delta);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mouseWheelHandle"><a href="#mouseWheelHandle" class="headerlink" title="mouseWheelHandle()"></a>mouseWheelHandle()</h3><p><code>mouseWheelHandle()</code>  可以将滑动、鼠标及键盘统一到一起，来完成 <code>doScroll()</code> 的页面操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var mouseWheelHandle = function (event, delta) &#123;</span><br><span class="line">    event.preventDefault();</span><br><span class="line"></span><br><span class="line">    // 这里鼠标没有给delta</span><br><span class="line">    if (!delta) &#123;</span><br><span class="line">        delta = event.originalEvent.wheelDelta || -event.originalEvent.detail;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 每次只滚动一屏</span><br><span class="line">    if (delta &gt; 0) &#123;</span><br><span class="line">        delta = 1;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        delta = -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 进行滚动</span><br><span class="line">    doScroll(delta);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="changeSectionPosition"><a href="#changeSectionPosition" class="headerlink" title="changeSectionPosition()"></a>changeSectionPosition()</h3><p><code>changeSectionPosition()</code>  完成页面平移，包含页面滚动、手指跟随、页面回弹。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function changeSectionPosition(top, time, easing) &#123;</span><br><span class="line">    el.css(&#123;</span><br><span class="line">        &apos;-webkit-transform&apos;: &apos;translate3d(0, &apos; + top + &apos;px, 0)&apos;,</span><br><span class="line">        &apos;-webkit-transition&apos;: &apos;-webkit-transform &apos; + time + &apos;ms &apos; +easing,</span><br><span class="line">        &apos;-moz-transform&apos;: &apos;translate3d(0, &apos; + top + &apos;px, 0)&apos;,</span><br><span class="line">        &apos;-moz-transition&apos;: &apos;-moz-transform &apos; + time + &apos;ms &apos; +easing,</span><br><span class="line">        &apos;-ms-transform&apos;: &apos;translate3d(0, &apos; + top + &apos;px, 0)&apos;,</span><br><span class="line">        &apos;-ms-transition&apos;: &apos;-ms-transform &apos; + time + &apos;ms &apos; +easing,</span><br><span class="line">        &apos;transform&apos;: &apos;translate3d(0, &apos; + top + &apos;px, 0)&apos;,</span><br><span class="line">        &apos;transition&apos;: &apos;transform &apos; + time + &apos;ms &apos; +easing</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="代码简要分析"><a href="#代码简要分析" class="headerlink" title="代码简要分析"></a>代码简要分析</h2><h3 id="设置项"><a href="#设置项" class="headerlink" title="设置项"></a>设置项</h3><ul>
<li><code>defaults</code> 默认参数</li>
<li><code>settings</code> 可扩展参数</li>
<li><code>elementInit</code> 针对 defaults 和 settings中的 <strong>element</strong> 中需要变成$()的进行了预先元素设置。</li>
<li><code>endIndex</code> 当前执行动画后的单页序号</li>
<li><code>endTop</code> 执行动画后页面的位置</li>
</ul>
<h3 id="功能函数"><a href="#功能函数" class="headerlink" title="功能函数"></a>功能函数</h3><p>init() 提供了的进入方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 执行一次  在ie10+、chrome、Safari、Firefox等浏览器上使用page scroll</span><br><span class="line">if ($(&apos;html&apos;).hasClass(&apos;csstransforms3d&apos;)) &#123;</span><br><span class="line">    // 启动本函数</span><br><span class="line">    init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>pagination 对页码进行处理<br>page 对每一个单页做处理<br>subNav 对<code>header-nav-slide</code> 进行处理<br>updateIndex() 对 <code>endIndex</code> 进行处理<br>updateTop() 对 <code>endTop</code> 进行处理</p>
<p>附上单页案例<br><a href="https://github.com/yanhaijing/zepto.fullpage/issues/21" target="_blank" rel="noopener">https://github.com/yanhaijing/zepto.fullpage/issues/21</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/前端插件/" rel="tag"># 前端插件</a>
          
            <a href="/tags/单页全屏/" rel="tag"># 单页全屏</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/06/01/github-hexo/" rel="prev" title="github-hexo">
                github-hexo <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Chilligo Sheng">
          <p class="site-author-name" itemprop="name">Chilligo Sheng</p>
          <p class="site-description motion-element" itemprop="description">小溪里，来自于某个很有情怀的公司，喜欢前端，也喜欢产品，更喜欢闲扯。刚学摄影，喜欢拍拿手菜酸辣土豆丝。</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        

      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#引言"><span class="nav-number">1.</span> <span class="nav-text">引言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#功能列表"><span class="nav-number">1.1.</span> <span class="nav-text">功能列表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#补充说明"><span class="nav-number">2.</span> <span class="nav-text">补充说明</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单位，是使用-还是-px-像素"><span class="nav-number">2.1.</span> <span class="nav-text">单位，是使用 % 还是 px (像素)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#是否兼容IE9"><span class="nav-number">2.2.</span> <span class="nav-text">是否兼容IE9-</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#各大浏览器的具体表现如何？"><span class="nav-number">2.3.</span> <span class="nav-text">各大浏览器的具体表现如何？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#手势操作"><span class="nav-number">3.</span> <span class="nav-text">手势操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#慢速滑动和快速滑动"><span class="nav-number">3.1.</span> <span class="nav-text">慢速滑动和快速滑动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bug处理——卡在标题栏"><span class="nav-number">3.1.1.</span> <span class="nav-text">bug处理——卡在标题栏</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手指跟随"><span class="nav-number">3.2.</span> <span class="nav-text">手指跟随</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#页面回弹"><span class="nav-number">3.3.</span> <span class="nav-text">页面回弹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bug处理——开在调出控制中心后"><span class="nav-number">3.3.1.</span> <span class="nav-text">bug处理——开在调出控制中心后</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#附上-swipeEvents-代码"><span class="nav-number">3.4.</span> <span class="nav-text">附上 swipeEvents 代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#核心函数"><span class="nav-number">4.</span> <span class="nav-text">核心函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#doScroll"><span class="nav-number">4.1.</span> <span class="nav-text">doScroll()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#transformPage"><span class="nav-number">4.2.</span> <span class="nav-text">transformPage()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mouseWheelHandle"><span class="nav-number">4.3.</span> <span class="nav-text">mouseWheelHandle()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#changeSectionPosition"><span class="nav-number">4.4.</span> <span class="nav-text">changeSectionPosition()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#代码简要分析"><span class="nav-number">5.</span> <span class="nav-text">代码简要分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#设置项"><span class="nav-number">5.1.</span> <span class="nav-text">设置项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#功能函数"><span class="nav-number">5.2.</span> <span class="nav-text">功能函数</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chilligo Sheng</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>
<div class="powered-by">
  Hosted by <a href="https://pages.coding.me">Coding Pages</a>
</div>
<div class="powered-by">
  Look at <a href="https://github.com/shenghanqin/">My GitHub</a>
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  




  
  

  

  

  

  


</body>
</html>
